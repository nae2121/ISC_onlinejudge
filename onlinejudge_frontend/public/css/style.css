:root{
    --bg:#ffffff;
    --panel:#f7f8fa;
    --text:#0f172a;
    --muted:#6b7280;
    --accent:#2563eb;
  
    /* ボタン色変数 */
    --btn-bg: transparent;
    --btn-border: rgba(0,0,0,0.06);
    --btn-text: var(--text);
    --btn-accent-bg: var(--accent);
    --btn-accent-text: #ffffff;
  
    /* Problem / IO box colors (ライトモード：背景よりやや暗めで視認性を確保) */
    --problem-bg: #f3f4f6;        /* Problem のカード背景（白より暗め） */
    --problem-border: #e2e8f0;    /* Problem のボーダー（薄いグレー） */
    --io-bg: #f8fafc;             /* IO ボックス背景（白より暗め） */
    --io-border: #e6e9ef;         /* IO ボーダー */
    --textarea-bg: #f8fafc;
  
    /* IO resizer (light mode = white) */
    --io-start: rgba(255,255,255,1);
    --io-end: rgba(255,255,255,0.95);
    --io-border-top: rgba(255,255,255,0.85);
    --io-border-bottom: rgba(255,255,255,0.65);
    --io-hover-start: rgba(255,255,255,1);
    --io-hover-end: rgba(255,255,255,0.95);
  }
  body{margin:0;font-family:system-ui,Arial;background:var(--bg);color:var(--text);height:100vh;display:flex;flex-direction:column}
  body.dark{
    /* ダークモードを全体的に明るめに調整 + ボタンを黒寄せに */
    --bg:#151617;
    --panel:#191b1c;
    --panel-2:#1c1e1f;
    --text:#e7ebdf;
    --muted:#b0b79a;
    --accent:#5b8cff;
    --accent-2:#274e8a;
   
    /* ボタン色（ダーク時は黒背景・白文字に） */
    --btn-bg: #0b0b0b;
    --btn-border: rgba(255,255,255,0.04);
    --btn-text: #ffffff;
    --btn-accent-bg: #2b6be4;
    --btn-accent-text: #ffffff;
   
    /* Problem / IO box colors (ダークモード: 背景より明るめで視認性を確保) */
    --problem-bg: #1d1f20;          /* Problem のカード背景（背景より明るめ） */
    --problem-border: rgba(255,255,255,0.08);
    --io-bg: #1b1d1e;               /* IO 背景（背景より明るめ） */
    --io-border: rgba(255,255,255,0.06);
    --textarea-bg: #141516;
   
    /* IO resizer for dark mode */
    --io-start: rgba(70,70,70,1);
    --io-end: rgba(70,70,70,0.95);
    --io-border-top: rgba(255,255,255,0.06);
    --io-border-bottom: rgba(255,255,255,0.04);
    --io-hover-start: rgba(90,90,90,1);
    --io-hover-end: rgba(90,90,90,0.95);
  }
  .topbar{display:flex;align-items:center;gap:12px;padding:10px 16px;background:var(--panel);border-bottom:1px solid rgba(0,0,0,0.06)}
  .tab-button{background:var(--btn-bg);border:1px solid var(--btn-border);padding:6px 10px;border-radius:6px;cursor:pointer;color:var(--btn-text)}
  .language-selector select{padding:6px;border-radius:6px;background:var(--textarea-bg);color:var(--text);border:1px solid var(--io-border);cursor:pointer}
  .workspace{flex:1;display:flex;min-height:0;position:relative}
  .left-panel{display:flex;flex-direction:column;background:var(--panel);box-sizing:border-box;flex:0 0 260px;min-width:48px;border-right:1px solid rgba(0,0,0,0.04)}
  .right-panel{display:flex;flex-direction:column;background:var(--panel);box-sizing:border-box;position:relative;flex:0 0 260px;min-width:48px;border-left:1px solid rgba(0,0,0,0.04)}
  .center-panel{flex:1;display:flex;flex-direction:column;min-width:0}
  .panel-header{padding:10px;border-bottom:1px solid rgba(0,0,0,0.04);display:flex;justify-content:space-between;align-items:center}
  .panel-content{padding:8px;overflow:auto}
  /* Problem box should fill left-panel height and allow scrolling */
  #problemBody{
    flex:1;
    min-height:0; /* allow proper flex-based shrinking */
    overflow:auto;
    display:block;
    box-sizing:border-box;
    /* 左側に少しスペースを追加して読みやすくする */
    padding-left:12px;
  }
  /* Ensure IO panel contents fill their section heights */
  .io-section .panel-content{
    flex:1;
    display:flex;
    flex-direction:column;
    min-height:0;
    box-sizing:border-box;
  }
  /* Problem box (見やすく) */
  #problemBody.panel-content{
    background:var(--problem-bg);
    border:1px solid var(--problem-border);
    border-radius:8px;
    padding:12px;
    box-sizing:border-box;
  }
  /* IO box styling */
  .io-section .panel-content{
    background:var(--io-bg);
    border:1px solid var(--io-border);
    border-radius:8px;
    padding:8px;
    box-sizing:border-box;
    overflow:auto;
  }
  #editor{flex:1;min-height:0}
  textarea{width:100%;box-sizing:border-box;padding:8px;border-radius:6px;border:1px solid var(--io-border);background:var(--textarea-bg);color:var(--text);resize:none}
  .col-resizer{width:8px;cursor:col-resize;background:transparent;flex:0 0 8px}
  .io-container{display:flex;flex-direction:column;flex:1;min-height:0;overflow:visible;padding-bottom:12px}
  /* Ensure IO headers and controls float above content when output is pinned */
  .io-section .panel-header{position:relative;z-index:400;background:var(--panel)}
  .io-section .panel-header .io-minimize, .io-minimize{z-index:420;pointer-events:auto}
  .io-section{flex:1;display:flex;flex-direction:column;min-height:0;overflow:hidden;position:relative;min-height:0}
  .io-section .panel-content{position:relative;z-index:100;background:transparent}
  .io-resizer{
    height:8px;
    cursor:row-resize;
    /* light/dark 切替用の CSS 変数を使用（ライト = 白、ダーク = 指定色） */
    background: linear-gradient(90deg, var(--io-start), var(--io-end));
    border-top: 1px solid var(--io-border-top);
    border-bottom: 1px solid var(--io-border-bottom);
    box-shadow: inset 0 1px 0 rgba(0,0,0,0.15);
    flex:0 0 8px;
    position:relative;
    z-index:50;
  }
  .io-resizer:hover{
    background: linear-gradient(90deg, var(--io-hover-start), var(--io-hover-end));
  }
  .io-resizer.pinned{
    position:absolute !important;
    left:0;
    right:0;
    bottom:36px;
    z-index:130;
  }
  /* ensure textareas don't force page scroll */
  .io-section textarea{min-height:0;max-height:100%;box-sizing:border-box}
  .panel-content{min-height:0}
  /* collapsed styles */
  .left-collapsed{flex:0 0 36px !important;min-width:36px !important;overflow:visible}
  .left-collapsed .panel-header strong{display:none}
  .left-collapsed .collapse-tab{display:flex}
  .collapse-tab{display:none;position:absolute;left:6px;top:50%;transform:translateY(-50%) rotate(90deg);width:24px;height:24px;border-radius:4px;background:var(--accent);color:#fff;align-items:center;justify-content:center;font-weight:700;box-shadow:0 2px 6px rgba(0,0,0,0.12)}
  .io-collapsed{flex:0 0 36px !important;min-height:36px !important;max-height:36px !important;overflow:hidden}
  /* ensure collapsing hides inner content (both panel-content and textarea) for Input and Output */
  .io-section.io-collapsed .panel-content,
  .io-section.io-collapsed textarea {
    display: none !important;
    visibility: hidden !important;
    height: 0 !important;
    padding: 0 !important;
    margin: 0 !important;
  }
  /* Output section: ensure collapsed state fully minimizes like Input */
  #outputSection.io-collapsed {
    flex: 0 0 36px !important;
    min-height: 36px !important;
    max-height: 36px !important;
    overflow: hidden !important;
  }
  .io-top-tab{position:absolute;left:50%;transform:translateX(-50%);top:6px;width:28px;height:20px;border-radius:4px;background:var(--accent);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;cursor:pointer}
  .io-bottom-tab{position:absolute;left:50%;transform:translateX(-50%);bottom:6px;width:28px;height:20px;border-radius:4px;background:var(--accent);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;cursor:pointer}
  .panel-header strong{font-size:14px}
  